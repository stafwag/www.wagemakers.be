<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>

<title>  	 Graphical programming in Assembly (DOS) - Staf Wagemakers</title>
<link rel="stylesheet" type="text/css" href="../../stafwag/css/stafwag.css" />
<link rel="stylesheet" type="text/css" href="../../stafwag/css/stafwag-webgui.css" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="generator" content="WebGUI 7.10.23" /><meta http-equiv="Content-Script-Type" content="text/javascript" /><meta http-equiv="Content-Style-Type" content="text/css" /><script type="text/javascript">function getWebguiProperty (propName) {var props = new Array();props["extrasURL"] = "/extras/";props["pageURL"] = "/english/doc/vga";props["firstDayOfWeek"] = "0";return props[propName];}</script>
<meta http-equiv="Cache-Control" content="must-revalidate" />
</head>

<body>

<!-- wrap starts here -->
<div id="wrap">

		<!-- header -->

		<div id="header">
<!-- google analytics -->

<script type="text/javascript">
<!--
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-37258385-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
//-->
</script>

<script type="text/javascript"><!--
google_ad_client = "ca-pub-4659298941528586";
/* head_banner */
google_ad_slot = "5954810285";
google_ad_width = 468;
google_ad_height = 58;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
					

			<ul>
				<li><a href="../../index.html"><span>Home</span></a></li>
				<li><a href="../../dutch.html"><span>Nederlands</span></a></li>
				<li><a href="../../english.html"><span>English</span></a></li>
				<li><a href="../../downloads.html"><span>Downloads</span></a></li>
				<li><a href="../../links.html"><span>links</span></a></li>
							
			</ul>								
		</div>
		
		<div id="header-logo">
                        <div id="mylogo">Staf&nbsp;Wagemakers</div>

<div id="google-search">

<div id="cse-search-form" style="width: 100%;">Loading</div>
<script src="http://www.google.com/jsapi" type="text/javascript"></script>
<script type="text/javascript"> 
  google.load('search', '1', {language : 'en', style : google.loader.themes.V2_DEFAULT});
  google.setOnLoadCallback(function() {
    var customSearchOptions = {};  var customSearchControl = new google.search.CustomSearchControl(
      '011952366183077168952:clxrudllfuo', customSearchOptions);
    customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
    var options = new google.search.DrawOptions();
    options.enableSearchboxOnly("http://www.google.com/cse?cx=011952366183077168952:clxrudllfuo", null, true);
    customSearchControl.draw('cse-search-form', options);
  }, true);
</script>



</div>


</div>






				
		

	<div id="sidebar">
		<div class="sidebar">

<a name="idIjSy9C91wSVONrzWFkETgg" id="idIjSy9C91wSVONrzWFkETgg"></a>




	<h1>Navigation</h1>





<!--
<ul class="menu bulletList">
-->
<div class="left-box">
<ul class="sidemenu">




	<li class="ancestor">
	<a href="../../home.html">Home</a>


    <ul class="level0">






	<li>
	<a href="../../dutch.html">Nederlands</a>


    </li>






	<li class="ancestor">
	<a href="../../english.html">English</a>


    <ul class="level1">






	<li>
	<a href="../programs.html">Programs</a>


    </li>






	<li class="ancestor">
	<a href="../doc.html">Documentation</a>


    <ul class="level2">






	<li class="current">
	<a href="vga.html">Graphical programming in asm</a>


    </li>






	<li>
	<a href="indy.html">Howto install Debian GNU/Linux on a SGI Indy</a>


    </li>






	<li>
	<a href="flarssh.html">Create a flar over a ssh tunnel (nfs port forwarding)</a>


    </li>






	<li>
	<a href="showprogress.html">Show progress in scripting</a>


    </li>






	<li>
	<a href="linux_kvm_private_virtual_switch.html">Linux kvm private virtual switch with libvirtd</a>


    </li>






	<li>
	<a href="tripwire.html">Tripwire quick guide</a>


    </li>






	<li>
	<a href="disksuite.html">Solaris: Disk Mirroring with DiskSuite</a>


    </li>





    </ul>
    </li>


	<li>
	<a href="../toys.html">Toys</a>


    </li>






	<li>
	<a href="../who_am_i.html">Who am I?</a>


    </li>





    </ul>
    </li>


	<li>
	<a href="../../downloads.html">Downloads</a>


    </li>






	<li>
	<a href="../../links.html">links</a>


    </li>



    
    </ul>
    </li>
    



</ul>
</div>


<!--/nav2234b2f42f75c1254e36bcd616411382 /nav bulletedList-->
</div>

		<h1>About me</h1>
<div class="left-box">
<ul class="sidemenu">
<li>
<ul class="level0">

<li class="ancestor">
<b>Homepage:</b> <a href="../../index.html">www.wagemakers.be</a>
</li>

<li class="ancestor">
<b>Blog:</b> <a href="http://stafwag.github.io/blog">stafwag.github.io/blog</a>
</li>

<li class="ancestor">

<a href="http://be.linkedin.com/in/stafwagemakers" style="text-decoration:none;"><span style="font: 80% Arial,sans-serif; color:#0783B6;"><img src="http://www.linkedin.com/img/webpromo/btn_in_20x15.png" width="20" height="15" alt="View staf wagemakers's LinkedIn profile" style="vertical-align:middle" />View staf wagemakers's profile</span></a>


</li>

<li class="ancestor">

<img src="http://ssl.gstatic.com/images/icons/gplus-16.png" alt="Google+" style="border:0;width:16px;height:16px;"/>
<a href="https://google.com/+StafWagemakers"> Staf Wagemakers</a> <br /><br />


<!-- Place this tag where you want the widget to render. -->
<div class="g-follow" data-annotation="bubble" data-height="20" data-href="//google.com/+StafWagemakers" data-rel="author" >

</div>

<!-- Place this tag after the last widget tag. -->
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>

</li>

<li class="ancestor">

<a href="https://github.com/stafwag">@stafwag</a> on GitHub


</li>

</ul>
</li>
</ul>



		<h1>Login</h1>

		<div class="left-box">
			<ul class="sidemenu">
				<li><a class="loginToggleLink" href="vga%3Fop=auth%3Bmethod=init.html">Login</a></li>
				<li><a href="vga%3Fop=auth%3Bmethod=init.html">View My Account</a></li>
				
			</ul>
		</div>




		</div>



	    

<!--
		<h1>WebGUI Links</h1>	
		<div class="left-box">
			<ul class="sidemenu"><li><a href="http://webgui.org/addons">Addons and Plugins</a></li></ul>
		</div>	
-->

            

	    <div class="ads">

		<br /><br />


            <p>
<a href="http://www.procolix.com"><img src="../../root/themes/staf/images/hosted_by_procolix.png" alt="hosted by procolix" /></a>
             </p>

<p>
    <a href="http://validator.w3.org/check?uri=referer"><img
      src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0 Strict" height="31" width="88" /></a><br />
    <a href="http://jigsaw.w3.org/css-validator/check/referer">
        <img style="border:0;width:88px;height:31px"
            src="http://jigsaw.w3.org/css-validator/images/vcss"
            alt="Valide CSS!" />
    </a>
</p>

<p>


<!-- vertical link ad -->
    <br />

<script type="text/javascript"><!--
google_ad_client = "ca-pub-4659298941528586";
/* side-block */
google_ad_slot = "2562895628";
google_ad_width = 120;
google_ad_height = 600;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>




<!-- vertical link ad ends -->


        </p>
        </div>

	</div>				
							
	<div id="main"><div id="folder-eWW7uevrW3UJ34r_8S0SQ" class="folder">

<a name="id-eWW7uevrW3UJ34r_8S0SQ" id="id-eWW7uevrW3UJ34r_8S0SQ"></a>


	

	<h3>  	 Graphical programming in Assembly (DOS)</h3>

		

<div class="description">
	<h1>Contents</h1>
<ul>
<li><a href="vga.html#section1">1. Change to a VGA resolution.</a></li>
<li><a href="vga.html#section2">2. Write to the video memory</a></li>
<li><a href="vga.html#section3">3. Adjusting the palette</a></li>
<li><a href="vga.html#section4">4. Read the video memory</a></li>
<li><a href="vga.html#section5">5. Different write modes</a></li>
<li><a href="vga.html#section6">6. Drawing a line</a></li>
<li><a href="vga.html#section7">7. Resources</a></li>
</ul>
<hr />
<p></p>
<h1><a name="section1"></a>1. Change to a VGA resolution.</h1>
<p>With BIOS interrupt 13 AH = 00 we're ably to change the current screen resolution (See below).</p>
<table border="1" cellpadding="3">
<tbody>
<tr>
<td valign="top" align="center">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Al (hex)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td valign="top" align="center">video mode</td>
</tr>
<tr>
<td valign="top" align="center"><br />0 <br />1 <br />2 <br />3 <br />4 <br />5 <br />6 <br />7 <br />... <br />F <br />10 <br />11 <br />12</td>
<td valign="top" align="left"><br />text 40 x 25 16 grey <br />text 40 x 25 16 color <br />text 80 x 25 16 grey <br />text 80 x 25 16 color <br />graph (CGA) 320 x 200 color <br />graph (CGA) 320 x 200 black / white <br />graph (CGA) 640 x 200 black / white <br />text 80 x 25 black / white (MDA, Hercules) <br />... <br />graph (EGA,VGA) 640x350 grey <br />graph (EGA,VGA) 640x350 16 colors <br />graph (VGA) 2 colors <br />graph (VGA) 16 colors</td>
</tr>
</tbody>
</table>
<p>In the next paragraphs we'll discuss meanly the standard VGA resolution (12h) These days most VGA-boards has "Super VGA" resolutions, in the next table you'll find the information to change to a "VESA Super VGA"<br /><br /></p>
<table cellpadding="3">
<tbody>
<tr>
<td valign="top" align="left">INT 10h</td>
<td valign="top" align="left">AX = 4F02h</td>
</tr>
<tr>
<td></td>
<td valign="top" align="left">BX = mode</td>
</tr>
</tbody>
</table>
<table border="1" cellpadding="3">
<tbody>
<tr>
<td valign="top" align="center">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td valign="top" align="center">video mode</td>
</tr>
<tr>
<td valign="top" align="center"><br />100h <br />101h <br />102h <br />103h <br />104h <br />105h <br />106h <br />107h <br />108h <br />109h <br />10Ah <br />10Bh <br />10Ch</td>
<td valign="top" align="left"><br />graph 640x400&nbsp;&nbsp;&nbsp;256 colors <br />graph 640x480&nbsp;&nbsp;&nbsp;256 colors <br />graph 800x600&nbsp;&nbsp;&nbsp;16&nbsp;&nbsp;&nbsp;colors <br />graph 800x600&nbsp;&nbsp;&nbsp;256 colors <br />graph 1024x768&nbsp;&nbsp;&nbsp;16&nbsp;&nbsp;&nbsp;colors <br />graph 1024x768&nbsp;&nbsp;256 colors <br />graph 1280x1024&nbsp;16&nbsp;&nbsp;&nbsp;colors <br />graph 1280x1024&nbsp;256 colors <br />text 80x60 <br />text 132x25 <br />text 132x43 <br />text 132x50 <br />text 132x60</td>
</tr>
</tbody>
</table>
<p>When your VGA BIOS support this function AH will become 00h, otherwise AH will return 01h. The issues in the next paragraph can also be use in the VESA resolution 800 x 600 16 colors.</p>
<p></p>
<h1><a name="section2"></a>2. Write to the video memory</h1>
<p>The standard IBM VGA card has 16 color therefor every pixel needs 4 bits (2^4 = 16) The VGA graphical card uses bitplanes, every main color has his own memory area in the video memory. Because the memory address is equal for every main color (A000:0000h memory mapped) we have to program the sequencer to select the right memory bank. <br /><br /></p>
<p>register selection with port 03C4h.</p>
<p></p>
<table border="1" cellpadding="3">
<tbody>
<tr>
<td valign="top" align="center">&nbsp;&nbsp;&nbsp;register&nbsp;&nbsp;&nbsp;</td>
<td valign="top" align="center">name</td>
</tr>
<tr>
<td valign="top" align="center"><br />00 <br />01 <br />02 <br />03 <br />04</td>
<td valign="top" align="left"><br />reset <br />Clocking mode <br />Map Mask <br />Character Map Select&nbsp;&nbsp;&nbsp; <br />Memory mode</td>
</tr>
</tbody>
</table>
<p>With the Map Mask register we can select to which color plane we write.</p>
<p><img src="../../root/images/vga/vga_fig1.jpg" alt="[gfx vga_fig1.jpg]" /></p>
<p>When we set bit 0 we'll write to the blue bitplane, if we set bit 0 and 1 (3) we'll write to the to blue bitplane. The next example will elucidate the above theory.</p>
<p></p>
<pre><code><br /> .MODEL SMALL<br /> .CODE<br />start:<br /> mov ax,012h ;VGA mode<br /> int 10h ;640 x 480 16 colors.<br /> mov ax,0A000h<br /> mov es,ax ;ES points to the video memory.<br /> mov dx,03C4h ;dx = indexregister<br /> mov ax,0F02h ;INDEX = MASK MAP, <br /> out dx,ax ;write all the bitplanes.<br /> mov di,0 ;DI pointer in the video memory.<br /> mov cx,38400 ;(640 * 480)/8 = 38400<br /> mov ax,0FFh ;write to every pixel.<br /> rep stosb ;fill the screen<br /> mov ah,4ch ;go back <br /> int 21h ; to DOS.<br /> END start<br /></code></pre>
<p>&nbsp;</p>
<p>With mov ax,0F02h, out dx,ax we select all the bitplanes this results in the color white. If we change mov ax,0F02h to mov ax,0102h we'll get a blue screen ;-).</p>
<h1><a name="section3"></a>3. Video Palette</h1>
<p>Another advantange of VGA is the ability to modify the colors, so it's possible to give pictures a more "real" look.<br />There're two way the modify the video palette program direct to the video hardware or use the video software interrupt (INT 10h). Below you'll find howto change the palette by INT 10h.<br /><br /> With INT 10h AX = 1010h we can change the palette of one color, BX contains the color register, CH the green value, CL the blue value and DH the red value. There is a difference between "color register" and "color number" we can solve this by first request the "color register" of the "color number". We can do this with INT 10 AX = 1007h, BL contains the color number the color register will be returned in BH. The next example will proof that practice is less complicated that the theory.</p>
<p></p>
<pre><code> <br />;------------------------------------------<br />;Modify the palette of one color.<br />;BX = color number<br />;ch = green <br />;cl = blue <br />;dh = red <br />;------------------------------------------<br />pal PROC<br /> push ax<br /> mov bh,0<br /> mov ax,1007h<br /> int 10h<br /> mov bl,bh<br /> mov bh,0<br /> mov ax,1010h<br /> int 10h<br /> pop ax<br /> ret<br />pal ENDP<br /></code></pre>
<p>&nbsp;</p>
<h1><a name="section4"></a>4. Reading the Video memory</h1>
<p>Reading the Video memory is more or less the same as writing to it. We have to change the graphical control to read mode. This is possible with port address 03CEh and 03CFh.<br /> The next table gives you a overview of the possible functions.</p>
<p>&nbsp;</p>
<p>Mode adjustment by port 03CEh.</p>
<p></p>
&nbsp;
<table border="1" cellpadding="0">
<tbody>
<tr>
<td valign="top" align="center">&nbsp;&nbsp;&nbsp;register&nbsp;&nbsp;&nbsp;</td>
<td valign="top" align="center">Name</td>
</tr>
<tr>
<td valign="top" align="center"><br />1 <br />2 <br />3 <br />4 <br />5 <br />6 <br />7 <br />8</td>
<td valign="top" align="left"><br />Set/Reset <br />Enable Set/Reset <br />Data Rotate/Function Select&nbsp;&nbsp;&nbsp;&nbsp; <br />Read Map Select <br />Graphics mode <br />Miscellaneous <br />Color don't care <br />Bit Mask</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>When we set port 03CEh to 3 we set the VGA card in read mode with port 03CFh we can specify the color bitplane to read. In the next table contains the colors with equivalent values.</p>
<p>bitplane selection by port 03CFh</p>
<table border="1" cellpadding="3">
<tbody>
<tr>
<td valign="top" align="center">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br />2 <br />1 <br />0</td>
<td valign="top" align="center">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; blue&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br />green <br />red <br />intensity</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>The next procedure will demonstrate the above theory. It read one byte in the 4 color bitplanes (BGRI), with SI we specify the byte address.</p>
<p></p>
<pre><code> <br /> PUBLIC readbyte<br />;--------------------------------------------<br />;Read one byte in the video memory<br />;call : SI byte address<br />;answer : al,ah,bl,bh -&gt; bl,gr,rood,inten<br />;--------------------------------------------<br />readbyte PROC NEAR<br /> push cx<br /> push dx<br /> push si<br /> push es<br /> mov ax,0A000h<br /> mov es,ax<br /> mov dx,03ceh <br /> mov ax,0005h<br /> out dx,ax<br /> mov ax,0304h ;AH = bitplane, AL = read modus<br />rb01: out dx,ax ;go to read mode <br /> mov bh,es:[si] ;read the blue byte<br /> dec ah<br /> out dx,ax ;AH = green<br /> mov bl,es:[si] ;read the green byte<br /> dec ah<br /> out dx,ax ;AH = red<br /> mov ch,es:[si] ;read the red byte<br /> dec ah <br /> out dx,ax ;AH = intensity<br /> mov cl,es:[si] ;read the intensity byte<br /> mov ax,cx<br /> pop es<br /> pop si<br /> pop dx<br /> pop cx<br /> ret<br />readbyte ENDP<br /></code></pre>
<p>&nbsp;</p>
<h1><a name="section5"></a>5. Different write modes</h1>
<p>There're 4 different write modes; replace, AND, OR and XOR, we change the write mode by the "Data Rotate/Function Select" register (see table in paragraph 2).By putting 3 in the selection register 03CEh we select the "Data Rotate/Function Select".<br /> <br /> Like the name suggest we also have the ability the rotate the date, this isn't often used since it's faster to rotate the date with the normal processor.<br /><br /> With the dataregister at port address 03CFh we can specify how to the data is written to the screen.</p>
<p></p>
<p>write mode selection by port 03CFh</p>
<table border="1" cellpadding="3">
<tbody>
<tr>
<td valign="top" align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bit 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bit3 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td valign="top" align="center">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="top" align="left"><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</td>
<td valign="top" align="center"><br />replace <br />AND <br />OR <br />XOR</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>sample:</p>
<p></p>
<p>mov ax,1803h <br />mov dx,03CEh <br />out dx,ax</p>
<p>&nbsp;</p>
<p>Will set the VGA card write mode to XOR.</p>
<h1><a name="section6"></a>6. Drawing a line</h1>
<p>Drawing a line in assembly isn't that easy... and it is very important not to use to complicated functions (cos, sin ...) since this is too difficult to program and (more important) will slow the function.<br /> The most widely used function to draw a line is the so called Bresenham algoritme which is published in IBM System Journal in 1965.</p>
<p>The equation of a line : y = (dy/dx).x</p>
<p style="text-align: center;"><img src="../../root/images/vga/vga_fig2.jpg" alt="[gfx vga_fig2.jpg]" /></p>
<p>When the line is closer to point A, we have to draw point A. When the line is closer to point B we need to draw point B.</p>
<p></p>
<pre><code><br />a = (yi+1) - (dy/dx).xi<br /><br />b = (dy/dx).xi - yi<br /><br />(b-a) = 2.(dy/dx).xi - 2.yi - 1<br /><br />(b-a).dx = 2.(dy.xi - yi.dx) - dx<br /><br />suppose di = (b-a).dx<br /><br />di = 2.(dy.xi - yi.dx) - dx<br /></code></pre>
<p>&nbsp;</p>
<p>We need to calculate di with the information of the last drew point:</p>
<p></p>
<pre><code><br />(di - di-1) = 2.(dy.xi - yi.dx) - dx - 2.(dy.xi-1 - yi-1.dx) + dx<br /><br />(di - di-1) = 2.(dy.(xi - xi-1) - dx(yi - yi-1))<br /></code></pre>
<p>&nbsp;</p>
<p>For the step in the x direction (xi - xi-1) we choose 1.</p>
<p></p>
<pre><code><br />(di - di-1) = 2.(dy - dx(yi - yi-1)) <br /></code></pre>
<p>&nbsp;</p>
<p>The value of (yi - yi-1) depends on where we have to draw the point, (yi - yi-1) is 1 when we need to draw point A (yi-1 +1) and will be 0 if we need to draw point B (yi = yi-1).</p>
<p>When we have to draw point A : (di - di-1) = 2.(dy - dx)<br /> When we have to draw point B : (di - di-1) = 2.dy</p>
<p>Below you'll find a Turbo Pascal program that uses the Bresenham algoritme.</p>
<p></p>
<p></p>
<pre><code><br />program tst_lijn;<br />uses crt,graph,dos;<br />var regs: registers;<br /> d,dx,dy: integer;<br /> Aincr,Bincr,Yincr: integer;<br /> x,y: integer;<br />procedure lijn (x1,y1,x2,y2 : integer);<br />var j :integer;<br />begin<br />if (x1 &gt; x2) then begin j:=x1;x1:=x2;x2:=j;j:=y1;y1:=y2;y2:=j;end;<br />if (y2 &gt; y1) then yincr:=1 else yincr :=-1;<br />dx := x2 - x1;dy:= abs(y2-y1);<br />d := 2*dy-dx;<br />aincr := 2*(dy-dx); {stap indien punt A geplaatst wordt}<br />bincr := 2*dy; {stap indien punt B geplaatst wordt}<br />x := x1;y:=y1; <br />putpixel(x,y,15); {tekenen van het eerste punt}<br />for x := (x1+1) to x2 do<br />begin<br />if d&gt;=0 then begin y := y+yincr;d := d +aincr;end<br /> else d := d+bincr;<br />putpixel (x,y,15);<br />end;<br />end;<br />procedure open_graph;<br />var<br /> grdriver,grmode,errcode : integer;<br />begin<br /> grdriver:=detect;<br /> initgraph(grdriver,grmode,'c:\tp\bgi');<br /> errcode:=graphresult;<br /> if errcode&lt;&gt;grok then<br /> begin<br /> closegraph;<br /> writeln('Graphics driver niet OK!');<br /> writeln('Programma gestopt.');<br /> halt;<br /> end;<br />end;<br />begin<br /><br />open_graph;<br />lijn(0,0,640,480);<br />repeat until keypressed;<br />end.<br /></code></pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h1><a name="section7"></a>7. Resources:</h1>
<ul>
<li>PC en PS/2 videosystemen van Kluwer. (Programmer's guide to PC &amp; PS/2 video systems by Richard Wilton (Micro$oft Press))</li>
<li>Het computer hardware boek van Kluwer.</li>
<li>Interruptlist (program) written by Ralp Brown.</li>
</ul>
<!--/description-->
</div>

			



<!--/folder-eWW7uevrW3UJ34r_8S0SQ /folder-->
</div>
<p>
<br /><br />
<script type="text/javascript"><!--
google_ad_client = "pub-4659298941528586";
google_ad_width = 800;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "text_image";
google_ad_channel ="";
google_color_border = "336699";
google_color_bg = "FFFFFF";
google_color_link = "0000FF";
google_color_url = "008000";
google_color_text = "000000";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>

</p>
</div>			
<!-- wrap ends here -->
</div>
		
<!-- footer starts here -->
<div class="footer">

<script type="text/javascript"><!--
google_ad_client = "ca-pub-4659298941528586";
/* bottom-artikel */
google_ad_slot = "3673193890";
google_ad_width = 728;
google_ad_height = 90;
//-->


</script>
<!--
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
//-->
	
	<p>	
	Valid <a href="http://validator.w3.org/check/referer">XHTML</a> |
   	<a href="http://jigsaw.w3.org/css-validator/check/referer">CSS</a>
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	<!-- bottom nav -->				
	</p>


		
</div>	
	
</body>
</html>